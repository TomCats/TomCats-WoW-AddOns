--[[ See license.txt for license and copyright information ]]
select(2, ...).SetupGlobalFacade()

-- Lua core functions
AddAllowedGlobals({
	"assert",
	"error",
	"ipairs",
	"loadstring",
	"math",
	"next",
	"pairs",
	"print",
	"setmetatable",
	"tonumber",
	"tostring",
	"type",
	"select",
	"string",
	"table",
	"tinsert",
	"unpack",
	"xpcall",
})
-- Blizzard-owned variables
AddAllowedGlobals({
	"ABANDON_QUEST",
	"AbandonQuest",
	--"ACCEPT_ALT",
	"AutoQuestWatch_Insert",
	--"AnchorUtil",
	--"BaseMapPoiPinMixin",
	"C_Item",
	"C_Timer",
	--"CALENDAR_TYPE_DUNGEON",
	--"CALENDAR_TYPE_RAID",
	"CancelEmote",
	"Clamp",
	"CLICK_QUEST_DETAILS",
	"CollapseQuestHeader",
	"ColorMixin",
	"CreateFromMixins",
	"CreateRectangle",
	"CreateTextureMarkup",
	"CreateTexturePool",
	--"CreateVector2D",
	"CursorUpdate",
	"DAILY",
	"DoEmote",
	"EventRegistry",
	"ExpandQuestHeader",
	"FAILED",
	"format",
	"FrameDeltaLerp",
	"FramePool_HideAndClearAnchors",
	"GameFontDisableSmallLeft",
	"GameFontHighlightSmallLeft",
	"GameFontNormalSmallLeft",
	"GameTooltip", -- todo: reevaluate for potential taint
	"GameTooltip_ShowCompareItem",
	"GameTooltipTextLeft1",
	"GetAddOnMetadata",
	"GetCriteriaSpell",
	"GetCursorPosition",
	"GetDifficultyInfo",
	"GetFinalNameFromTextureKit",
	"GetInstanceInfo",
	"GetItemInfoInstant",
	--"GetLocale",
	--"GetMouseFocus",
	"GetMaterialTextColors",
	"GetMoney",
	"GetMoneyString",
	"GetMouseFocus",
	"GetNumQuestLeaderBoards",
	"GetNumQuestLogChoices",
	"GetNumQuestLogEntries",
	"GetNumQuestLogRewards",
	"GetNumQuestLogRewardSpells",
	"GetNumQuestWatches",
	"GetNumSubgroupMembers",
	"GetQuestGreenRange",
	"GetQuestItemInfo",
	"GetQuestItemLink",
	"GetQuestLogChoiceInfo",
	"GetQuestLogLeaderBoard",
	"GetQuestLogQuestText",
	"GetQuestLogTimeLeft",
	"GetQuestLogRewardHonor",
	"GetQuestLogRewardMoney",
	"GetQuestLogRewardSpell",
	"GetQuestLogRewardTitle",
	"GetQuestLogTitle",
	"GetScreenHeight",
	"GetScreenWidth",
	"GetServerTime",
	"GetTickTime",
	"GetValueOrCallFunction",
	"GRAY_FONT_COLOR",
	"GREEN_FONT_COLOR",
	"HelpPlateTooltip",
	"HideUIPanel",
	"HIGHLIGHT_FONT_COLOR",
	"HOME",
	"IsCurrentQuestFailed",
	"IsInGroup",
	"IsInInstance",
	"IsQuestWatched",
	"IsShiftKeyDown",
	--"IsTutorialFlagged",
	"IsUnitOnQuest",
	"Kiosk",
	"Lerp",
	"MAP_AND_QUEST_LOG",
	"max",
	"MAX_OBJECTIVES",
	"MAX_WATCHABLE_QUESTS",
	"MaximizeUIPanel",
	"min",
	"Mixin",
	"nop",
	"NORMAL_FONT_COLOR",
	"PercentageBetween",
	"PlayerMovementFrameFader",
	"PlaySound",
	"QUEST_DASH",
	"QUEST_ICONS_FILE",
	"QUEST_ICONS_FILE_WIDTH",
	"QUEST_ICONS_FILE_HEIGHT",
	"QUEST_TAG_TCOORDS",
	"QUEST_WATCH_NO_EXPIRE",
	"QUEST_WATCH_NO_OBJECTIVES",
	"QUEST_WATCH_LIST",
	"QUEST_WATCH_TOO_MANY",
	"QuestDifficultyColors",
	"QuestDifficultyHighlightColors",
	"QuestFrame_HideQuestPortrait",
	"QuestLogPushQuest",
	"QuestWatch_Update",
	"RED_FONT_COLOR",
	"RemoveQuestWatch",
	"RestoreUIPanelArea",
	"REWARD_CHOOSE",
	"REWARD_CHOICES",
	"REWARD_ITEMS",
	"REWARD_ITEMS_ONLY",
	"Saturate",
	"SecondsFormatter",
	"SecondsFormatterMixin",
	--"SECONDS_PER_MIN",
	"SelectQuestLogEntry",
	"SetAbandonQuest",
	"SetItemButtonCount",
	"SetItemButtonNameFrameVertexColor",
	"SetItemButtonQuality",
	"SetItemButtonTexture",
	"SetItemButtonTextureVertexColor",
	"SetPortraitToTexture",
	"SetUIPanelAttribute",
	"SHARE_QUEST",
	"ShowUIPanel",
	"SortQuests",
	"SortQuestSortTypes",
	"SOUNDKIT",
	"StaticPopup_Hide",
	"StaticPopup_Show",
	--"StaticPopupDialogs",
	"strlen",
	--"time",
	"TextureLoadingGroupMixin",
	"TRACK_QUEST",
	"TRACK_QUEST_ABBREV",
	"tremove",
	"UIErrorsFrame",
	"UIPanelWindows",
	"UIParent",
	--"UnitFactionGroup",
	"UnitLevel",
	"UnitPosition",
	"UNTRACK_QUEST",
	"UNTRACK_QUEST_ABBREV",
	"UpdateUIPanelPositions",
	"WEEKLY",
	"WORLD",
	"WORLD_MAP",
	"WorldMapContinentDropDown",
	"WorldMapFrame",
	"WorldMapFrameBg",
	"WorldMapFrameCloseButton",
	"WorldMapMagnifyingGlassButton",
	"WorldMapZoneDropDown",
	"WorldMapZoneMinimapDropDown",
	"WorldMapZoomOutButton",
})

-- Addon-specific variables
AddAllowedGlobals({
	--"TomCats_Static_Popup",
})

-- Renamed globals
AddRenamedGlobals({
	"CloseDropDownMenus",
	"DropDownExpandArrowMixin",
	"DropDownMenuButtonMixin",
	--"DungeonEntrancePinMixin",
	"QuestLogHeaderMixin",
	"QuestLogHeaderCodeMixin",
	"Main_HelpPlate_Button_OnEnter",
	"Main_HelpPlate_Button_OnLeave",
	"MapCanvasDetailLayerMixin",
	--"MapCanvasMixin",
	--"MapCanvasScrollControllerMixin",
	"MapQuestInfoRewardsFrame",
	"MaximizeMinimizeButtonFrameMixin",
	"MiniMapInstanceDifficulty",
	"MiniMapInstanceDifficulty_Update",
	"NavBar_ToggleMenu",
	"NineSlicePanelMixin",
	"OverrideButtonAtlases",
	"PortraitFrameMixin",
	"QuestDetailsFrame_OnHide",
	"QuestDetailsFrame_OnShow",
	"QuestInfoDescriptionHeader",
	"QuestInfoDescriptionText",
	"QuestInfoFrame",
	"QuestInfoGroupSize",
	"QuestInfoObjectivesFrame",
	"QuestInfoObjectivesHeader",
	"QuestInfoObjectivesText",
	"QuestInfoQuestType",
	"QuestInfoRequiredMoneyFrame",
	"QuestInfoRewardItemCodeTemplate_OnClick",
	"QuestInfoRewardItemCodeTemplate_OnEnter",
	"QuestInfoRewardsFrame",
	"QuestInfoRewardText",
	"QuestInfoSealFrame",
	"QuestInfoSpecialObjectivesFrame",
	"QuestInfoSpellObjectiveFrame",
	"QuestInfoSpellObjectiveLearnLabel",
	"QuestInfoTimerFrame",
	"QuestInfoTimerFrame_OnUpdate",
	"QuestInfoTitleHeader",
	"QuestLogMixin",
	"QuestLogObjectiveTemplate",
	--"QuestLogOwnerMixin",
	"QuestLogPopupDetailFrame",
	"QuestLogPopupDetailFrame_OnHide",
	"QuestLogPopupDetailFrame_OnLoad",
	"QuestMapDetailsScrollFrame",
	"QuestMapFrame",
	"QuestMapFrame_AdjustPathButtons",
	"QuestMapFrame_GetDetailQuestID",
	"QuestMapFrame_OnEvent",
	"QuestMapFrame_OnHide",
	"QuestMapFrame_OnLoad",
	"QuestMapFrame_OnShow",
	"QuestMapFrame_ReturnFromQuestDetails",
	"QuestMapLog_HideStoryTooltip",
	"QuestMapLog_ShowStoryTooltip",
	"QuestMapLogTitleButton_OnClick",
	"QuestMapLogTitleButton_OnEnter",
	"QuestMapLogTitleButton_OnLeave",
	"QuestMapLogTitleButton_OnMouseDown",
	"QuestMapLogTitleButton_OnMouseUp",
	"QuestMapQuestOptions_AbandonQuest",
	"QuestMapQuestOptions_ShareQuest",
	"QuestMapQuestOptions_TrackQuest",
	"QuestMapQuestOptionsDropDown",
	--"QuestMapQuestOptionsDropDown_OnLoad",
	--"QuestPOI_Initialize",
	"QuestScrollFrame",
	"QuestsFrame_OnLoad",
	--"UIDROPDOWNMENU_MAXBUTTONS",
	"ScrollFrame_OnLoad",
	"ScrollFrame_OnMouseWheel",
	"ScrollFrame_OnScrollRangeChanged",
	"ScrollFrame_OnVerticalScroll",
	"ScrollFrameTemplate_OnMouseWheel",
	"UIDropDownMenu_OnClick",
	"UIDropDownMenu_OnHide",
	"UIDropDownMenu_OnShow",
	"UIDropDownMenu_OnUpdate",
	--"UIDropDownMenu_StartCounting",
	--"UIDropDownMenu_StopCounting",
	"UIDropDownMenuButton_OnClick",
	"UIDropDownMenuButton_OnEnter",
	"UIDropDownMenuButton_OnLeave",
	"UIDropDownMenuButtonInvisibleButton_OnEnter",
	"UIDropDownMenuButtonInvisibleButton_OnLeave",
	--"WorldMapFloorNavigationFrameMixin",
	--"WorldMapMixin",
	"WorldMapTutorialMixin",
	"WorldMapNavBarMixin",
	"WorldMapSidePanelToggleMixin",
	--"WorldMapTrackingOptionsButtonMixin",
})

-- dynamically created variables
AddDynamicallyRenamedGlobals({
	"^DropDownList[0-9]+.*$",
})
